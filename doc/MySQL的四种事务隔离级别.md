# 简介
在对MySQL的四种事务隔离级别进行说明前，还需要搞清楚以下几个问题。

1. 什么是事务？
2. 数据库并发数据访问可能产生的五种问题。

# 什么是事务？
事务是由一步或几步数据库操作序列组成逻辑执行单元，这系列操作要么全部执行，要么全部放弃执行。  
事务具有以下4个特性，也简称ACID特性。
- 原子性（Atomicity）： 一个事务中的多个操作不可分割，要么全都成功要么全都失败。
- 一致性（Consistency）：事务前后数据的状态要一致。
- 隔离性（Isolation）： 多个事务不能了解彼此的中间状态。
- 持久性（Duration）：事务完成后数据要持久化。

# 数据库并发数据访问可能产生的五种问题
- 第1类丢失更新：撤销事务时覆盖了另一个事务更新后的结果
- 第2类丢失更新：提交事务时后提交的事务覆盖了前一个提交的事务的结果
- 脏读（读脏数据）：一个事务读到了另一个事务尚未提交的数据
- 不可重复读：一个事务的更新/删除操作导致另一个事务读取不到之前查询的结果
- 幻读：一个事务的插入操作导致另一个事务读取到了之前没有的数据

# 四种事务隔离级别
为了解决上述问题，关系型数据库提供了锁机制（共享锁、排他锁、表锁、行锁）。但直接操作锁非常麻烦（加锁、解锁），我们在使用关系型数据库时通常是通过设置事务隔离级别让数据库自动完成锁操作。
- read uncommitted（读未提交）：不会发生第1类丢失更新，其他问题都会发生
- read committed（读提交）：不会发生第1类丢失更新和脏读
- repeatable read（可重复读）：会发生幻读，不会发生其他问题
- serializable（串行化）：不会发生上述所有问题

通过以下命令可查看当前的事务隔离级别。
~~~sql
SELECT @@transaction_isolation;
+-------------------------+
| @@transaction_isolation |
+-------------------------+
| REPEATABLE-READ         |
+-------------------------+
1 row in set (0.00 sec)
~~~

通过以下命令可更改事务的隔离级别。
~~~sql
mysql> SET session transaction isolation level read uncommitted;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @@session.transaction_isolation;
+---------------------------------+
| @@session.transaction_isolation |
+---------------------------------+
| READ-UNCOMMITTED                |
+---------------------------------+
1 row in set (0.00 sec)
~~~
